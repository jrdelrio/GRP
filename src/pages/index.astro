---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import "../../styles/spinner.scss";
---

<Layout>
    <Header />

    <section id="welcome">
        <div class="overlay"></div>
        <div class="bg-slides">
            <div
                class="bg-slide"
                style="background-image: url('/bg/machine-bg.jpg');"
            >
            </div>
            <div
                class="bg-slide"
                style="background-image: url('/bg/control-center.jpg');"
            >
            </div>
            <div
                class="bg-slide"
                style="background-image: url('/bg/excavator-action.jpg');"
            >
            </div>
            <div
                class="bg-slide"
                style="background-image: url('/bg/technology.jpg');"
            >
            </div>
            <div
                class="bg-slide"
                style="background-image: url('/bg/train.jpg');"
            >
            </div>
        </div>

        <h2 class="section-title lora" data-i18n="welcome.title">
            GRP Ingenier√≠a
        </h2>
        <p class="section-subtitle" data-i18n="welcome.subtitle">
            Expertos en gesti√≥n contractual para proyectos de Metro,
            Ferrocarriles, Concesiones e Infraestructura. Maximizamos el √©xito
            de tus proyectos con enfoque estrat√©gico independiente.
        </p>
        <div class="links">
            <a
                href="#offering"
                data-i18n="welcome.buttonServices"
                class="flip-in-hor-bottom-d600ms with-arrow"
                >Conocer Servicios <span>‚Üí</span></a
            >
            <a
                href="#contact"
                data-i18n="welcome.buttonContact"
                class="flip-in-hor-bottom-d800ms">Solicitar Consulta</a
            >
        </div>
    </section>

    <section id="offering">
        <h2 class="section-title text-black lora" data-i18n="offering.title">
            Qu√© Ofrecemos
        </h2>
        <p class="section-subtitle" data-i18n="offering.subtitle">
            Una opini√≥n t√©cnica contractual independiente, con apoyo a la
            gesti√≥n en la direcci√≥n de proyectos, orientado a mandantes y
            contratistas, cuya finalidad es asegurar el cumplimiento del
            contrato en costo y plazo, y contar con informaci√≥n oportuna de
            desviaciones para la toma de decisiones.
        </p>

        <div class="offers">
            <article class="offer">
                <h3 class="text-black lora" data-i18n="offering.focus.title">
                    Nuestro Enfoque
                </h3>
                <p data-i18n="offering.focus.infoP1">
                    Proporcionamos asesor√≠as t√©cnicas especializadas que
                    maximizan el √©xito de proyectos, mediante un enfoque
                    estrat√©gico de los problemas que pueden venir por la toma de
                    decisiones (an√°lisis de pro y contra con sus riesgos).
                </p>
                <p data-i18n="offering.focus.infoP2">
                    Nos especializamos en la prevenci√≥n de reclamaciones
                    (claims) y en la gesti√≥n eficaz del arbitraje, estructurando
                    el trabajo de manera estrat√©gica para alcanzar los objetivos
                    del proyecto, optimizar los recursos disponibles y mitigar
                    los riesgos.
                </p>
                <p data-i18n="offering.focus.infoP3">
                    Adem√°s, administramos la relaci√≥n t√©cnica entre mandante y
                    contratista, con la capacidad de liderar proyectos complejos
                    y desafiantes.
                </p>
            </article>

            <article class="offer">
                <h3 class="text-black lora" data-i18n="offering.area.title">
                    Nuestra √Årea de Gesti√≥n
                </h3>
                <ul>
                    <li>
                        <p data-i18n="offering.area.list.item1.info">
                            <span data-i18n="offering.area.list.item1.span"
                                >Metro:</span
                            >
                            L√≠neas de transporte subterr√°neo y elevado
                        </p>
                    </li>
                    <li>
                        <p data-i18n="offering.area.list.item2.info">
                            <span data-i18n="offering.area.list.item2.span"
                                >Ferrocarriles:</span
                            >
                            Sistemas de transporte ferroviario urbano e interurbano
                        </p>
                    </li>
                    <li>
                        <p data-i18n="offering.area.list.item3.info">
                            <span data-i18n="offering.area.list.item3.span"
                                >Concesiones:</span
                            >
                            Proyectos bajo modalidad de concesi√≥n
                        </p>
                    </li>
                    <li>
                        <p data-i18n="offering.area.list.item4.info">
                            <span data-i18n="offering.area.list.item4.span"
                                >Infraestructura:</span
                            >
                            Construcci√≥n y modernizaci√≥n de obras
                        </p>
                    </li>
                </ul>
            </article>
        </div>
        <div class="grid">
            <article>
                <img src="./icons/focus.png" alt="enfoque estrategico" />
                <h4 data-i18n="offering.grid.item1.title">
                    Enfoque Estrat√©gico
                </h4>
                <p data-i18n="offering.grid.item1.info">
                    An√°lisis integral desde la perspectiva contractual y t√©cnica
                    para optimizar resultados del proyecto.
                </p>
            </article>
            <article>
                <img src="./icons/eye.png" alt="visi√≥n independiente" />
                <h4 data-i18n="offering.grid.item2.title">
                    Visi√≥n Independiente
                </h4>
                <p data-i18n="offering.grid.item2.info">
                    Asesor√≠a objetiva e imparcial que prioriza los intereses del
                    cliente y el √©xito del proyecto.
                </p>
            </article>
            <article>
                <img src="./icons/medal.png" alt="experiencia comprobada" />
                <h4 data-i18n="offering.grid.item3.title">
                    Experiencia Comprobada
                </h4>
                <p data-i18n="offering.grid.item3.info">
                    M√°s de 15 a√±os gestionando proyectos complejos de Metro,
                    Ferrocarriles, Concesiones e Infraestructura.
                </p>
            </article>
            <article>
                <img src="./icons/risk.png" alt="evaluaci√≥n de riesgos" />
                <h4 data-i18n="offering.grid.item4.title">
                    Evaluaci√≥n de Riesgos
                </h4>
                <p data-i18n="offering.grid.item4.info">
                    Identificaci√≥n temprana de riesgos contractuales para evitar
                    sobrecostos y retrasos.
                </p>
            </article>
        </div>
    </section>

    <section id="project-cycle">
        <h2
            class="section-title text-black lora"
            data-i18n="project-cycle.title"
        >
            Acompa√±amiento experto en Todo el Ciclo del Proyecto
        </h2>
        <p class="section-subtitle" data-i18n="project-cycle.subtitle">
            Nuestra asesor√≠a contempla las etapas de licitaci√≥n y construcci√≥n,
            incluyendo la prevenci√≥n de reclamaciones y arbitrajes. Contamos con
            experiencia en el gerenciamiento integral del proyecto para el
            mandante, bajo un enfo que OPM (Owner Project Management).
        </p>
        <div class="grid">
            <article>
                <img src="./icons/licitacion.png" alt="licitaciones" />
                <h4 data-i18n="project-cycle.grid.card1.title">
                    Proceso de Licitaci√≥n
                </h4>
                <p data-i18n="project-cycle.grid.card1.subtitle">
                    An√°lisis integral para optimizar la participaci√≥n en
                    licitaciones y maximizar probabilidades de √©xito.
                </p>
                <ul>
                    <li data-i18n="project-cycle.grid.card1.list.item1">
                        Preparaci√≥n de documentos t√©cnicos de licitaci√≥n y la
                        coordinacion de estos
                    </li>
                    <li data-i18n="project-cycle.grid.card1.list.item2">
                        Definici√≥n de las distintas alternativas para la
                        estrategia de licitaci√≥n, an√°lisis de mercado de
                        posibles licitantes y tama√±os de contrato.
                    </li>
                    <li data-i18n="project-cycle.grid.card1.list.item3">
                        Contamos con especialidta legal en contratos de obras
                        p√∫blicas, HSEQ y experto en Primavera P6, entre otros
                    </li>
                    <li data-i18n="project-cycle.grid.card1.list.item4">
                        Manejo de stakeholders, autoridades y relaciones con la
                        comunidad
                    </li>
                </ul>
            </article>

            <article>
                <img src="./icons/budget.png" alt="presupuesto" />
                <h4 data-i18n="project-cycle.grid.card2.title">Presupuestos</h4>
                <p data-i18n="project-cycle.grid.card2.subtitle"></p>
                <ul>
                    <li data-i18n="project-cycle.grid.card2.list.item1">
                        Estimaciones de CAPEX y OPEX en distintas etapas de
                        inversi√≥n, contingencia y escalamiento, metodolog√≠a AACE
                        clase 5 a 1
                    </li>
                    <li data-i18n="project-cycle.grid.card2.list.item2">
                        Elaboraci√≥n presupuesto referencial con sus respaldos,
                        an√°lisis y Precios Unitarios y Gastos Generales
                    </li>
                    <li data-i18n="project-cycle.grid.card2.list.item3">
                        Preparaci√≥n programa y rendimientos en MS Project o
                        Primavera P6
                    </li>
                    <li data-i18n="project-cycle.grid.card2.list.item4">
                        Metodolog√≠a constructiva proyectos complejos
                    </li>
                    <li data-i18n="project-cycle.grid.card2.list.item5">
                        Mejora secuencias constructivas
                    </li>
                    <li data-i18n="project-cycle.grid.card2.list.item6">
                        Determinaci√≥n cuadrillas, maquinaria y equipos
                        necesarios
                    </li>
                    <li data-i18n="project-cycle.grid.card2.list.item7">
                        Matriz de permisos
                    </li>
                </ul>
            </article>

            <article>
                <img
                    src="./icons/construction.png"
                    alt="direccion de proyectos"
                />
                <h4 data-i18n="project-cycle.grid.card3.title">
                    Direcci√≥n Proyectos
                </h4>
                <p data-i18n="project-cycle.grid.card3.subtitle">
                    Gesti√≥n proactiva durante la ejecuci√≥n del proyecto para
                    asegurar cumplimiento de objetivos.
                </p>
                <ul>
                    <li data-i18n="project-cycle.grid.card3.list.item1">
                        Gerenciamiento del proyecto para el mandante, OPM (Owner
                        Project Management)
                    </li>
                    <li data-i18n="project-cycle.grid.card3.list.item2">
                        Conformaci√≥n equipo de obra y apoyo en la seleccion y
                        contrataci√≥n de personal
                    </li>
                    <li data-i18n="project-cycle.grid.card3.list.item3">
                        Apoyo t√©cnico en la definici√≥n y caracter√≠sticas de los
                        equipos
                    </li>
                    <li data-i18n="project-cycle.grid.card3.list.item4">
                        Planificaci√≥n y metodolog√≠a de control para disponer de
                        una obra eficiente
                    </li>
                    <li data-i18n="project-cycle.grid.card3.list.item5">
                        Mejoras en el ciclo de construcci√≥n y productividad
                    </li>
                    <li data-i18n="project-cycle.grid.card3.list.item6">
                        Manejo comunicaciones de obra
                    </li>
                </ul>
            </article>

            <article>
                <img src="./icons/peritaje.png" alt="gesti√≥n contractual" />
                <h4 data-i18n="project-cycle.grid.card4.title">
                    Gesti√≥n Contractual
                </h4>
                <p data-i18n="project-cycle.grid.card4.subtitle">
                    Gesti√≥n proactiva durante la ejecuci√≥n del proyecto para
                    asegurar cumplimiento de objetivos.
                </p>
                <ul>
                    <li data-i18n="project-cycle.grid.card4.list.item1">
                        An√°lisis de brechas en el estudio con una mirada
                        contractual que permita evaluar los riesgos y determinar
                        mitigaciones
                    </li>
                    <li data-i18n="project-cycle.grid.card4.list.item2">
                        Evaluaci√≥n y programa impactado, a medici√≥n de p√©rdida
                        de productividad mediante metodolog√≠a AACE y SCL
                    </li>
                    <li data-i18n="project-cycle.grid.card4.list.item3">
                        Generaci√≥n de documentaci√≥n para respaldo de
                        reclamaciones con apoyo al servicio de abogado experto
                        en el tema
                    </li>
                    <li data-i18n="project-cycle.grid.card4.list.item4">
                        Revisi√≥n de posibles reclamaciones de terceras partes
                        respecto al presupuesto y recursos
                    </li>
                    <li data-i18n="project-cycle.grid.card4.list.item5">
                        Informes periciales y de parte
                    </li>
                </ul>
            </article>
        </div>
        <a
            href="#contact"
            data-i18n="project-cycle.buttonContact"
            class="heartbeat"
            >Consulta
        </a>
        <p data-i18n="project-cycle.info">
            ¬øNecesita asesor√≠a espec√≠fica para su proyecto? Contacte con
            nuestros especialistas.
        </p>
    </section>

    <section id="team">
        <h2 class="section-title text-black lora" data-i18n="team.title">
            Nuestro Equipo
        </h2>
        <p class="section-subtitle" data-i18n="team.subtitle">
            Contamos con un equipo asociado experto en programaci√≥n, legal,
            medioambiente y evaluaci√≥n de da√±os.
        </p>

        <div class="box">
            <h4 class="text-black lora" data-i18n="team.box.title">
                Nuestra Filosof√≠a de Trabajo
            </h4>
            <p data-i18n="team.box.subtitle">
                Creemos en la importancia de una gesti√≥n contractual proactiva y
                estrat√©gica. Nuestro enfoque se basa en la prevenci√≥n de
                riesgos, la comunicaci√≥n transparente y la b√∫squeda constante de
                soluciones que maximicen el valor para nuestros clientes.
            </p>
        </div>
    </section>

    <section id="contact">
        <h1 class="text-black lora" data-i18n="contact.title">Contacto</h1>
        <p class="section-subtitle" data-i18n="contact.subtitle1">
            ¬øNecesitas asesor√≠a especializada para tu proyecto de
            infraestructura?
        </p>
        <p class="section-subtitle" data-i18n="contact.subtitle2">
            Cont√°ctanos para una consulta inicial sin compromiso.
        </p>

        <div class="container">
            <div class="info">
                <h3 class="text-black" data-i18n="contact.contactInfo.title">
                    Informaci√≥n de contacto
                </h3>
                <article>
                    <img src="/icons/email.png" alt="contact email" />
                    <div class="data">
                        <h4
                            data-i18n="contact.contactInfo.infoList.item1.title"
                        >
                            Correo Electr√≥nico
                        </h4>
                        <a
                            href="mailto:contacto@grpingenieria.cl"
                            data-i18n="contact.contactInfo.infoList.item1.data"
                        >
                            contacto@grpingenieria.cl
                        </a>
                        <p data-i18n="contact.contactInfo.infoList.item1.extra">
                            Respuesta en 24 horas
                        </p>
                    </div>
                </article>
                <article>
                    <img src="/icons/phone.png" alt="contact phone" />
                    <div class="data">
                        <h4
                            data-i18n="contact.contactInfo.infoList.item2.title"
                        >
                            Tel√©fono
                        </h4>
                        <a href="tel:+56964441479">+56964441479</a>
                        <p data-i18n="contact.contactInfo.infoList.item2.extra">
                            Lunes a Viernes 9:00 - 18:00
                        </p>
                    </div>
                </article>
                <!-- <article>
                    <img src="/icons/location.png" alt="contact location" />
                    <div class="data">
                        <h4
                            data-i18n="contact.contactInfo.infoList.item3.title"
                        >
                            Oficina Principal
                        </h4>
                        <p data-i18n="contact.contactInfo.infoList.item3.data">
                            Santiago, Chile
                        </p>
                        <p data-i18n="contact.contactInfo.infoList.item3.extra">
                            Reuniones presenciales con cita previa
                        </p>
                    </div>
                </article> -->
                <article>
                    <img src="/icons/clock.png" alt="consulta contact" />
                    <div class="data">
                        <h4
                            data-i18n="contact.contactInfo.infoList.item4.title"
                        >
                            Consulta Inicial Sin Compromiso
                        </h4>
                        <p data-i18n="contact.contactInfo.infoList.item4.extra">
                            Ofrecemos una primera consulta sin costo para
                            evaluar su proyecto y definir la mejor estrategia de
                            asesor√≠a t√©cnica.
                        </p>
                    </div>
                </article>
            </div>

            <form class="form" id="contact-form">
                <h3 data-i18n="contact.contactForm.title">
                    Solicitar Consulta
                </h3>
                <div class="input-group">
                    <div class="input-field">
                        <label
                            class="required"
                            for="name"
                            data-i18n="contact.contactForm.name.label"
                            >Nombre Completo</label
                        >
                        <input
                            type="text"
                            id="name"
                            name="name"
                            placeholder="Nombre completo"
                            data-i18n-placeholder="contact.contactForm.name.placeholder"
                            required
                        />
                    </div>
                    <div class="input-field">
                        <label
                            class="required"
                            for="email"
                            data-i18n="contact.contactForm.email.label"
                            >Correo Electr√≥nico</label
                        >
                        <input
                            id="email"
                            type="text"
                            name="email"
                            inputmode="email"
                            placeholder="ejemplo@empresa.com"
                            data-i18n-placeholder="contact.contactForm.email.placeholder"
                            required
                        />
                    </div>
                </div>
                <div class="input-group">
                    <div class="input-field">
                        <label
                            for="company"
                            data-i18n="contact.contactForm.company.label"
                            >Empresa/Organizaci√≥n</label
                        >
                        <input
                            type="text"
                            id="company"
                            placeholder="Nombre de la empresa"
                            name="company"
                            data-i18n-placeholder="contact.contactForm.company.placeholder"
                        />
                    </div>
                    <div class="input-field">
                        <label
                            for="phone"
                            data-i18n="contact.contactForm.phone.label"
                            >Tel√©fono</label
                        >
                        <input
                            type="text"
                            id="phone"
                            inputmode="tel"
                            placeholder="+56 9 1234 5678"
                            name="phone"
                        />
                    </div>
                </div>
                <div class="input-field">
                    <label
                        for="project"
                        data-i18n="contact.contactForm.project.label"
                        >Tipo de Proyecto</label
                    >
                    <input
                        type="text"
                        id="project"
                        placeholder="Metro, Ferrocarril, Concesi√≥n, etc."
                        name="project"
                        data-i18n-placeholder="contact.contactForm.project.placeholder"
                    />
                </div>
                <div class="input-field">
                    <label
                        for="message"
                        data-i18n="contact.contactForm.message.label"
                        >Mensaje</label
                    >
                    <textarea
                        rows="5"
                        id="message"
                        name="message"
                        placeholder="Describe brevemente tu proyecto y el tipo de asesor√≠a que necesitas..."
                        data-i18n-placeholder="contact.contactForm.message.placeholder"
                    ></textarea>
                </div>
                <button
                    type="submit"
                    id="submit-btn"
                    data-i18n="contact.contactForm.submitButton"
                    >Enviar Consulta</button
                >
            </form>
        </div>
    </section>

    <footer>
        <div class="grid">
            <div class="col">
                <a href="#welcome"
                    ><img
                        src="./logo/main-logo-white.png"
                        alt="GRP Ingenier√≠a Logo"
                    /></a
                >
                <p data-i18n="footer.col1.subtitle1">
                    Especialistas en asesor√≠as t√©cnicas para obras de
                    infraestructura.
                </p>
                <p data-i18n="footer.col1.subtitle2">
                    Experiencia comprobada en Metro, Ferrocarriles y
                    Concesiones.
                </p>
            </div>
            <div class="col">
                <h4 class="col-title" data-i18n="footer.col2.title">
                    Contacto
                </h4>
                <a href="mailto:contacto@grpingenieria.cl"
                    >contacto@grpingenieria.cl</a
                >
                <a href="tel:+56964441479">+56 9 6444 1479</a>
                <a href="" data-i18n="footer.col2.city">Santiago, Chile</a>
            </div>
            <div class="col">
                <h4 class="col-title" data-i18n="footer.col3.title">
                    Servicios
                </h4>
                <a href="#offering" data-i18n="offering.grid.item1.title"
                    >Qu√© Ofrecemos</a
                >
                <a href="#project-cycle" data-i18n="offering.grid.item2.title"
                    >Ciclo del Proyecto</a
                >
                <a href="#contact" data-i18n="offering.grid.item3.title"
                    >Contacto</a
                >
            </div>
        </div>
        <p data-i18n="footer.copywrite">
            &copy; 2025 GRP Ingenier√≠a. Todos los derechos reservados.
        </p>
         <p>
            Made with ü§ç by <a href="http://chilisites.com" target="_blank" rel="noopener noreferrer">üå∂Ô∏èChilisites</a>
        </p>
    </footer>

    <!-- links dentro de la pagina con smooth behavior -->
    <script is:inline>
        document.addEventListener("DOMContentLoaded", () => {
            const allLinks = document.querySelectorAll("a[href^='#']");
            // console.log(allLinks);

            allLinks.forEach((link) => {
                link.addEventListener("click", (ev) => {
                    const targetId = link.getAttribute("href")?.substring(1);
                    const targetEl = document.getElementById(targetId);

                    if (targetEl) {
                        ev.preventDefault();
                        targetEl.scrollIntoView({ behavior: "smooth" });
                        closeMenu();
                    }
                });
            });
        });
    </script>

    <!-- Activador de animaciones -->
    <script is:inline>
        function isInViewport(elem) {
            const distance = elem.getBoundingClientRect();
            return (
                distance.top <
                    (window.innerHeight ||
                        document.documentElement.clientHeight) &&
                distance.bottom > 0
            );
        }

        // Seleccionamos todos los <article> dentro de la secci√≥n offering
        const offers = document.querySelectorAll(
            "section#offering div.grid article"
        );

        const cycles = document.querySelectorAll(
            "section#project-cycle div.grid article"
        );

        const filosophyBox = document.querySelector("section#team div.box");

        const contactData = document.querySelectorAll(
            "section#contact div.container div.info article"
        );

        const footerLogo = document.querySelector(
            "footer div.grid div.col a img"
        );

        function checkArticles() {
            offers.forEach((article) => {
                if (isInViewport(article)) {
                    article.classList.add("flip-in-hor-bottom-dur1200ms");
                }
            });

            cycles.forEach((article) => {
                if (isInViewport(article)) {
                    article.classList.add("slide-in-left");
                }
            });

            if (isInViewport(filosophyBox)) {
                filosophyBox.classList.add("scale-in-center");
            }

            contactData.forEach((article) => {
                if (isInViewport(article)) {
                    article.classList.add("flip-in-hor-bottom-dur800ms");
                }
            });

            if (isInViewport(footerLogo)) {
                footerLogo.classList.add("scale-in-hor-left");
            }
        }

        // Ejecutar al cargar la p√°gina
        window.addEventListener("load", checkArticles);
        // Ejecutar en cada scroll
        window.addEventListener("scroll", checkArticles);
    </script>

    <!-- form handler -->
    <script is:inline>
        document
            .getElementById("contact-form")
            .addEventListener("submit", async (event) => {
                event.preventDefault();
                const form = event.target;
                const btn = document.getElementById("submit-btn");
                const originalText = btn.textContent;

                btn.disabled = true;
                btn.innerHTML = `<span class="spinner"></span> Enviando...`;

                try {
                    const formData = new FormData(form);
                    const response = await fetch("/api/contact-handler", {
                        method: "POST",
                        body: formData,
                    });

                    const result = await response.json();

                    if (result.success) {
                        alert("Consulta enviada con √©xito. ¬°Muchas Gracias!");
                        form.reset();
                    } else {
                        alert(
                            "Hubo un error: " + (result.error || "Desconocido")
                        );
                    }
                } catch (error) {
                    console.error(error);
                    alert("Error de conexi√≥n");
                }

                btn.disabled = false;
                btn.textContent = originalText;
            });
    </script>
</Layout>
